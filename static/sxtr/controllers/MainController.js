// Generated by CoffeeScript 1.10.0
(function() {
  var MainController, NewTranslationController, TranslationController;

  MainController = function($scope, translations) {
    return $scope.translations = translations;
  };

  MainController.$inject = ['$scope', 'translations'];

  NewTranslationController = function($scope, locales, applications, $location, Requests) {
    $scope.locales = locales;
    $scope.model = {};
    $scope.errors = {};
    $scope.applications = applications;
    return $scope.submit = function() {
      return Requests.post('translations/', $scope.model).then(function(data) {
        return $location.path("/translation/" + data.id);
      }, function(errors) {
        return $scope.errors = errors;
      });
    };
  };

  NewTranslationController.$inject = ['$scope', 'locales', 'applications', '$location', 'Requests'];

  TranslationController = function($scope, $location, $routeParams, Requests, $interval, Auth) {
    if (!($routeParams != null ? $routeParams.id : void 0)) {
      return $location.path('/');
    }
    $scope.loading = true;
    $scope.model = {};
    $scope.saving = false;
    $scope.errors = {};
    $scope.canEdit = false;
    $scope.trUrl = "translations/" + $routeParams.id;
    Requests.get($scope.trUrl).then(function(translation) {
      $scope.translation = translation;
      return $scope.canEdit = translation != null ? translation.canEdit : void 0;
    }, function(errors) {
      return $scope.errors = errors;
    }).then(function() {
      return $scope.loading = false;
    });
    return $scope.onSubmit = function() {
      return Requests.post($scope.trUrl, $scope.model).then(function() {
        return $scope.saving = false;
      }, function(errors) {
        return $scope.errors = errors;
      });
    };
  };

  TranslationController.$inject = ['$scope', '$location', '$routeParams', 'Requests', '$interval', 'Auth'];

  angular.module('sxTrApp').controller('mainController', MainController).controller('newTranslationController', NewTranslationController).controller('translationController', TranslationController);

}).call(this);
