// Generated by CoffeeScript 1.10.0
(function() {
  var ChangePasswordController, LoginController, ProfileController, RegisterController, ResetPasswordController;

  LoginController = function($scope, Auth, $location) {
    $scope.errors = {};
    $scope.user = {};
    return $scope.submit = function() {
      $scope.errors = {};
      return Auth.login($scope.user).then(function() {
        return $location.path('/');
      }, function(data) {
        return $scope.errors = data;
      });
    };
  };

  LoginController.$inject = ['$scope', 'Auth', '$location'];

  ResetPasswordController = function($scope, Requests, $location) {
    $scope.errors = {};
    $scope.user = {};
    return $scope.submit = function() {
      $scope.errors = {};
      return Requests.post('/account/reset', $scope.user).then(function() {
        return $location.path('login');
      }, function(errors) {
        return $scope.errors = errors;
      });
    };
  };

  ResetPasswordController.$inject = ['$scope', 'Requests', '$location'];

  ChangePasswordController = function($scope, Requests, $location) {
    $scope.errors = {};
    $scope.isDisabled = false;
    $scope.user = {};
    return $scope.submit = function() {
      $scope.isDisabled = true;
      $scope.errors = {};
      return Requests.post('/account/change_password', $scope.user).then(function() {
        return $location.path('profile');
      }, function(errors) {
        return $scope.errors = errors;
      }).then(function() {
        return $scope.isDisabled = false;
      });
    };
  };

  ChangePasswordController.$inject = ['$scope', 'Requests', '$location'];

  RegisterController = function($scope, Requests, $location) {
    $scope.errors = {};
    $scope.isDisabled = false;
    $scope.user = {};
    return $scope.submit = function() {
      $scope.isDisabled = true;
      $scope.errors = {};
      return Requests.post('/account/register', $scope.user).then(function() {
        return $location.path('login');
      }, function(errors) {
        return $scope.errors = errors;
      }).then(function() {
        return $scope.isDisabled = false;
      });
    };
  };

  RegisterController.$inject = ['$scope', 'Requests', '$location'];

  ProfileController = function($scope, currentUser, Auth) {
    $scope.errors = {};
    $scope.success = false;
    $scope.isDisabled = false;
    $scope.user = currentUser.data;
    return $scope.submit = function() {
      $scope.errors = {};
      $scope.isDisabled = true;
      return Auth.updateUser($scope.user).then(function() {
        return $scope.success = true;
      }).then(function() {
        return $scope.isDisabled = false;
      });
    };
  };

  ProfileController.$inject = ['$scope', 'currentUser', 'Auth'];

  angular.module('sxTrApp').controller('loginController', LoginController).controller('resetPasswordController', ResetPasswordController).controller('registerController', RegisterController).controller('profileController', ProfileController).controller('changePasswordController', ChangePasswordController);

}).call(this);
